 /**
 * package E-Commerce WD
 * author Web-Dorado
 * copyright (C) 2014 Web-Dorado. All rights reserved.
 * license GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 **/


////////////////////////////////////////////////////////////////////////////////////////
// Events                                                                             //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Constants                                                                          //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Variables                                                                          //
////////////////////////////////////////////////////////////////////////////////////////
var _thumb_box;


////////////////////////////////////////////////////////////////////////////////////////
// Constructor                                                                        //
////////////////////////////////////////////////////////////////////////////////////////
jQuery(document).ready(function () {
    _thumb_box = new ThumbBox(jQuery("#thumb_box"),'images');

    for (var i = 0; i < _thumbUrls.length; i++) {       
		var thumbUrl = (_thumbUrls[i].indexOf(_url_root) == -1 ) ? _url_root +  _thumbUrls[i] : _thumbUrls[i];		
        _thumb_box.addThumbAt(thumbUrl, undefined, 'images');
    }
});


////////////////////////////////////////////////////////////////////////////////////////
// Public Methods                                                                     //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Getters & Setters                                                                  //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Private Methods                                                                    //
////////////////////////////////////////////////////////////////////////////////////////
function checkForm() {
    var invalidField;
    jQuery(".required_field").each(function () {
        if (invalidField != null) {
            return false;
        }
        var value = jQuery(this).val();
        if (value.trim() == "") {
            invalidField = this;
            return false;
        }
    });

    if (invalidField != null) {
        alert("Please fill in all required fields!");
        jQuery(invalidField).focus();
        jQuery("html, body").animate({
            scrollTop: jQuery(invalidField).offset().top - 200
        }, "fast");
        return false;
    }

    fillThumbUrls();

    return true;
}

function fillThumbUrls() {
    var thumbUrls = _thumb_box.getUploadUrls();
	for(i=0; i<thumbUrls.length; i++ )
		thumbUrls[i] = thumbUrls[i].substr(_url_root.length);
    var valueThumbUrls = JSON.stringify(thumbUrls);
    jQuery("form[name=adminForm] input[name=thumb]").val(valueThumbUrls);
}


////////////////////////////////////////////////////////////////////////////////////////
// Listeners                                                                          //
////////////////////////////////////////////////////////////////////////////////////////
