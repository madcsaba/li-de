 /**
 * package E-Commerce WD
 * author Web-Dorado
 * copyright (C) 2014 Web-Dorado. All rights reserved.
 * license GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 **/



////////////////////////////////////////////////////////////////////////////////////////
// Events                                                                             //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Constants                                                                          //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Variables                                                                          //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Constructor                                                                        //
////////////////////////////////////////////////////////////////////////////////////////
jQuery(document).ready(function () {
    Joomla.submitbutton = onAdminFormSubmit;
});

////////////////////////////////////////////////////////////////////////////////////////
// Public Methods                                                                     //
////////////////////////////////////////////////////////////////////////////////////////
function updateProductsData(orderDataJson) {
    var orderData = JSON.parse(orderDataJson);

    jQuery(".el_product_names").html(orderData.product_names);
    jQuery(".el_total_price").html(orderData.total_price_text);
}


////////////////////////////////////////////////////////////////////////////////////////
// Getters & Setters                                                                  //
////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////
// Private Methods                                                                    //
////////////////////////////////////////////////////////////////////////////////////////
function showOrderProducts(orderId) {
    url = "index.php?option=com_ecommercewd" +
        "&controller=orderproducts" +
        "&task=explore" +
        "&callback=updateProductsData" +
        "&order_id=" + orderId;
    openPopUp(url, 1000);
}


////////////////////////////////////////////////////////////////////////////////////////
// Listeners                                                                          //
////////////////////////////////////////////////////////////////////////////////////////
function onBtnEditProductsClick(event, obj, orderId) {
    showOrderProducts(orderId);
}

function onAdminFormSubmit(pressbutton) { 
	var jq_mainForm = jQuery("form[name=adminForm]");
     if( pressbutton == "printorder"){
		jq_mainForm.attr('target','_blank');
    }	
	else{
		jq_mainForm.attr('target','_self');
	}
    submitform(pressbutton);
}
